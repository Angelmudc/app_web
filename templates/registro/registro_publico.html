{% extends "registro/base_registro.html" %}

{% block title %}Registro de Candidata{% endblock %}

{% block content %}
<main class="card-glass" role="main">
  <div class="form-head">
    <div class="form-head__left">
      <h1 class="title">Registro de Candidata</h1>
      <p class="subtitle">
        Completa tus datos con claridad. Los campos marcados con <strong>*</strong> son obligatorios.
      </p>
    </div>

    <div class="form-head__badge" aria-hidden="true">
      <span class="badge-dot"></span>
      <span>Formulario pÃºblico</span>
    </div>
  </div>

  <div class="accent-line" aria-hidden="true"></div>

  <!-- RESUMEN DE ERRORES (lo llena el JS si falta algo) -->
  <div class="error-summary d-none" id="errorSummary" role="alert" aria-live="polite">
    <div class="error-summary__icon">â›”</div>
    <div class="error-summary__text">
      Revisa los campos marcados. Te faltan datos obligatorios.
    </div>
  </div>

  <!-- FORM (ids/names intactos) -->
  <form method="post" action="{{ url_for('registro_publico.registro_publico') }}" id="registroForm" autocomplete="on" novalidate>
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    {% set f = request.form %}
    {% set f_areas = request.form.getlist('areas_experiencia') %}

    <!-- Identidad -->
    <section class="section">
      <div class="section__head">
        <h2 class="section__title">
          <span class="section__icon">ğŸªª</span> Identidad
        </h2>
        <p class="section__hint">Datos personales y de contacto.</p>
      </div>

      <div class="grid">
        <div class="field full">
          <label for="nombre_completo" class="label">Nombre completo <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸ‘¤</span>
            <input type="text" class="input" id="nombre_completo" name="nombre_completo" required maxlength="150"
                   value="{{ f.get('nombre_completo','') }}" placeholder="Ej: MarÃ­a PÃ©rez">
          </div>
          <div class="help">Escribe tu nombre como aparece en tu cÃ©dula.</div>
        </div>

        <div class="field">
          <label for="edad" class="label">Â¿QuÃ© edad tienes? <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">#</span>
            <input type="number" inputmode="numeric" class="input" id="edad" name="edad" required maxlength="10"
                   value="{{ f.get('edad','') }}" placeholder="Ej: 28">
          </div>
        </div>

        <div class="field">
          <label for="numero_telefono" class="label">NÃºmero de telÃ©fono <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸ“</span>
            <input type="tel" inputmode="tel" class="input" id="numero_telefono" name="numero_telefono" required maxlength="30"
                   value="{{ f.get('numero_telefono','') }}" placeholder="Ej: 809-000-0000">
          </div>
          <div class="help">Si no es tu nÃºmero personal, indÃ­calo en la direcciÃ³n o notas.</div>
        </div>

        <div class="field full">
          <label for="direccion_completa" class="label">DirecciÃ³n completa <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸ“</span>
            <textarea class="textarea" id="direccion_completa" name="direccion_completa" rows="2" required maxlength="250"
                      placeholder="Ej: Santiago, Los Jardines, Calle 10 #12">{{ f.get('direccion_completa','') }}</textarea>
          </div>
          <div class="help">Incluye ciudad, sector, calle y nÃºmero.</div>
        </div>

        <div class="field">
          <label for="cedula" class="label">CÃ©dula <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸ§¾</span>
            <input type="text" class="input" id="cedula" name="cedula" required maxlength="20"
                   value="{{ f.get('cedula','') }}" placeholder="000-0000000-0">
          </div>
          <div class="help">Se formatea automÃ¡ticamente al salir del campo.</div>
        </div>

        <div class="field">
          <div class="mini-note">
            <div class="mini-note__icon">ğŸ”’</div>
            <div class="mini-note__text">
              Tus datos se usan solo para procesos de registro y evaluaciÃ³n.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Preferencias -->
    <section class="section">
      <div class="section__head">
        <h2 class="section__title">
          <span class="section__icon">ğŸ’¼</span> Preferencias de trabajo
        </h2>
        <p class="section__hint">Modalidad, rutas y experiencia.</p>
      </div>

      <div class="grid">
        <div class="field full">
          <label class="label">Modalidad de trabajo preferida <span class="req">*</span></label>
          <div class="chips" role="radiogroup" aria-label="Modalidad preferida">
            <label class="chip">
              <input type="radio" name="modalidad_trabajo_preferida" value="Salida diaria" required
                     {% if f.get('modalidad_trabajo_preferida')=='Salida diaria' %}checked{% endif %}>
              <span>Salida diaria</span>
            </label>

            <label class="chip">
              <input type="radio" name="modalidad_trabajo_preferida" value="Dormida"
                     {% if f.get('modalidad_trabajo_preferida')=='Dormida' %}checked{% endif %}>
              <span>Dormida</span>
            </label>
          </div>
        </div>

        <div class="field full">
          <label for="rutas_cercanas" class="label">Rutas cercanas <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸšŒ</span>
            <input type="text" class="input" id="rutas_cercanas" name="rutas_cercanas" required maxlength="150"
                   value="{{ f.get('rutas_cercanas','') }}" placeholder="Ej: Ruta A, Av. Principal">
          </div>
          <div class="help">Escribe las rutas de transporte que pasan por tu zona.</div>
        </div>

        <div class="field full">
          <label for="empleo_anterior" class="label">Â¿QuÃ© hacÃ­as en tu empleo anterior? <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">âœ…</span>
            <textarea class="textarea" id="empleo_anterior" name="empleo_anterior" rows="2" required maxlength="150"
                      placeholder="Ej: Limpieza profunda y cocina bÃ¡sica">{{ f.get('empleo_anterior','') }}</textarea>
          </div>
        </div>

        <div class="field full">
          <label class="label">Â¿CuÃ¡ntos aÃ±os de experiencia laboral tienes? <span class="req">*</span></label>
          <div class="option-grid">
            <label class="opt">
              <input class="opt__input" type="radio" name="anos_experiencia" value="1 aÃ±o" required
                     {% if f.get('anos_experiencia')=='1 aÃ±o' %}checked{% endif %}>
              <span class="opt__box">1 aÃ±o</span>
            </label>

            <label class="opt">
              <input class="opt__input" type="radio" name="anos_experiencia" value="2 aÃ±os"
                     {% if f.get('anos_experiencia')=='2 aÃ±os' %}checked{% endif %}>
              <span class="opt__box">2 aÃ±os</span>
            </label>

            <label class="opt">
              <input class="opt__input" type="radio" name="anos_experiencia" value="3 aÃ±os o mÃ¡s"
                     {% if f.get('anos_experiencia')=='3 aÃ±os o mÃ¡s' %}checked{% endif %}>
              <span class="opt__box">3 aÃ±os o mÃ¡s</span>
            </label>

            <label class="opt">
              <input class="opt__input" type="radio" name="anos_experiencia" value="Sin experiencia"
                     {% if f.get('anos_experiencia')=='Sin experiencia' %}checked{% endif %}>
              <span class="opt__box">Sin experiencia</span>
            </label>
          </div>
        </div>

        <div class="field full">
          <label class="label">Ãreas de experiencia <span class="req">*</span></label>
          <div class="help">(marca todas las que correspondan)</div>

          <div class="check-grid">
            <label class="check">
              <input type="checkbox" name="areas_experiencia" value="Limpieza" {% if 'Limpieza' in f_areas %}checked{% endif %}>
              <span>Limpieza</span>
            </label>
            <label class="check">
              <input type="checkbox" name="areas_experiencia" value="Cocina" {% if 'Cocina' in f_areas %}checked{% endif %}>
              <span>Cocina</span>
            </label>
            <label class="check">
              <input type="checkbox" name="areas_experiencia" value="NiÃ±era" {% if 'NiÃ±era' in f_areas %}checked{% endif %}>
              <span>NiÃ±era</span>
            </label>
            <label class="check">
              <input type="checkbox" name="areas_experiencia" value="Cuidado de ancianos" {% if 'Cuidado de ancianos' in f_areas %}checked{% endif %}>
              <span>Cuidado de ancianos</span>
            </label>
            <label class="check">
              <input type="checkbox" name="areas_experiencia" value="EnfermerÃ­a" {% if 'EnfermerÃ­a' in f_areas %}checked{% endif %}>
              <span>EnfermerÃ­a</span>
            </label>
            <label class="check">
              <input type="checkbox" name="areas_experiencia" value="Todas las anteriores" {% if 'Todas las anteriores' in f_areas %}checked{% endif %}>
              <span>Todas las anteriores</span>
            </label>
          </div>
        </div>

        <div class="field full">
          <label class="label">Â¿Sabes planchar? <span class="req">*</span></label>
          <div class="chips" role="radiogroup" aria-label="Sabe planchar">
            <label class="chip">
              <input type="radio" name="sabe_planchar" value="si" required {% if f.get('sabe_planchar')=='si' %}checked{% endif %}>
              <span>SÃ­</span>
            </label>
            <label class="chip">
              <input type="radio" name="sabe_planchar" value="no" {% if f.get('sabe_planchar')=='no' %}checked{% endif %}>
              <span>No</span>
            </label>
          </div>
        </div>
      </div>
    </section>

    <!-- Referencias -->
    <section class="section">
      <div class="section__head">
        <h2 class="section__title">
          <span class="section__icon">ğŸ‘¥</span> Referencias
        </h2>
        <p class="section__hint">Laborales y familiares.</p>
      </div>

      <div class="grid">
        <div class="field full">
          <label for="contactos_referencias_laborales" class="label">Dos contactos de referencias laborales <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸ’¼</span>
            <textarea class="textarea" id="contactos_referencias_laborales" name="contactos_referencias_laborales" rows="3" required maxlength="500"
                      placeholder="Ej: Juan DÃ­az - 8090000000 - Jefe en XYZ&#10;Ana Rojas - 8091112222 - Coordinadora en ABC">{{ f.get('contactos_referencias_laborales','') }}</textarea>
          </div>
          <div class="help">Pon nombre, telÃ©fono y relaciÃ³n laboral. Cada referencia en una lÃ­nea.</div>
        </div>

        <div class="field full">
          <label for="referencias_familiares_detalle" class="label">Dos referencias familiares <span class="req">*</span></label>
          <div class="control-wrap">
            <span class="lead" aria-hidden="true">ğŸ </span>
            <textarea class="textarea" id="referencias_familiares_detalle" name="referencias_familiares_detalle" rows="3" required maxlength="500"
                      placeholder="Ej: Pedro PÃ©rez - 8093334444 - Hermano&#10;MarÃ­a GÃ³mez - 8095556666 - Madre">{{ f.get('referencias_familiares_detalle','') }}</textarea>
          </div>
          <div class="help">Solo familiares (no vecinos ni amigos).</div>
        </div>

        <div class="field full">
          <label class="label">Â¿Aceptas que cobremos un % de tu sueldo como honorarios? <span class="req">*</span></label>
          <div class="help">Es un Ãºnico pago que se explica al final.</div>

          <div class="option-grid">
            <label class="opt">
              <input class="opt__input" type="radio" name="acepta_porcentaje_sueldo" value="1" required
                     {% if f.get('acepta_porcentaje_sueldo')=='1' %}checked{% endif %}>
              <span class="opt__box">SÃ­, acepto</span>
            </label>

            <label class="opt">
              <input class="opt__input" type="radio" name="acepta_porcentaje_sueldo" value="0"
                     {% if f.get('acepta_porcentaje_sueldo')=='0' %}checked{% endif %}>
              <span class="opt__box">No</span>
            </label>
          </div>
        </div>
      </div>
    </section>

    <div class="actions">
      <button type="submit" class="btn-pill" id="submitBtn">
        <span class="spinner d-none" id="spinner"></span>
        <span id="btnText">Enviar</span>
        <span class="btn-ico" aria-hidden="true">âœˆï¸</span>
      </button>

      <div class="actions__note">
        Al enviar, confirmas que la informaciÃ³n es correcta.
      </div>
    </div>
  </form>
</main>
{% endblock %}