{% extends 'base.html' %}

{% block title %}Admin Login{% endblock %}

{% block content %}
<div class="orb one"></div>
<div class="orb two"></div>
<div class="orb three"></div>

<main class="auth-wrap">
  <section class="glass-card" role="form" aria-labelledby="authTitle">
    <header class="auth-header">
      <div class="login-icon" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.6" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6A2.25 2.25 0 005.25 5.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M9 12h12m0 0l-3 3m3-3l-3-3" />
        </svg>
      </div>
      <h1 id="authTitle" class="auth-title h4">Iniciar Sesión</h1>
      <p class="subtitle">Acceso administrativo • Doméstica del Cibao A&amp;D</p>
    </header>

    {% if error %}
      <div class="alert alert-danger" role="alert">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M12 9v2m0 4h.01M12 2a10 10 0 100 20 10 10 0 000-20z" />
        </svg>
        <span>{{ error }}</span>
      </div>
    {% endif %}

    {% with msgs = get_flashed_messages(with_categories=true) %}
      {% if msgs %}
        {% for category, msg in msgs %}
          <div class="alert alert-{{ category if category else 'danger' }}" role="alert">
            {{ msg }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="post" novalidate>
      <!-- ✅ CSRF SIEMPRE -->
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="mb-3 field">
        <label for="usuario" class="form-label">Usuario</label>
        <svg class="ico" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.6" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 20.118a7.5 7.5 0 0115 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.5-1.632z" />
        </svg>
        <input
          type="text"
          class="form-control"
          id="usuario"
          name="usuario"
          placeholder="Ingresa tu usuario"
          required
          autocomplete="username"
          autofocus>
      </div>

      <div class="mb-4 field">
        <label for="clave" class="form-label">Contraseña</label>
        <svg class="ico" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.6" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 0h10.5a2.25 2.25 0 012.25 2.25v5.25A2.25 2.25 0 0117.25 20.25H6.75A2.25 2.25 0 014.5 18v-5.25A2.25 2.25 0 016.75 10.5z" />
        </svg>
        <input
          type="password"
          class="form-control"
          id="clave"
          name="clave"
          placeholder="Ingresa tu contraseña"
          required
          autocomplete="current-password">
      </div>

      <button type="submit" class="btn btn-primary">Entrar</button>

      <div class="divider"></div>
      <p class="small-note">Protegido • Área solo para administradores</p>
    </form>
  </section>
</main>
{% endblock %}
