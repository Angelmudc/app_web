<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscripción de Candidatas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

    <h2>🔍 Inscripción de Candidatas</h2>

    <!-- FORMULARIO DE BÚSQUEDA -->
    <form action="/inscripcion" method="POST">
        <input type="text" name="buscar" placeholder="Buscar por cédula o nombre" required>
        <button type="submit">🔎 Buscar</button>
    </form>

    <!-- MENSAJE SI NO SE ENCONTRÓ NINGUNA CANDIDATA -->
    {% if mensaje %}
        <p style="color: red;">{{ mensaje }}</p>
    {% endif %}

    <!-- FORMULARIO DE INSCRIPCIÓN SI SE ENCONTRÓ CANDIDATA -->
    {% if datos_candidata %}
    <form id="inscripcion-form" action="/procesar_inscripcion" method="POST">
        <input type="hidden" name="fila_index" value="{{ datos_candidata.fila_index }}">

        <div class="form-group">
            <label><strong>Nombre:</strong></label>
            <span>{{ datos_candidata.nombre if datos_candidata.nombre else "No disponible" }}</span>
        </div>

        <div class="form-group">
            <label><strong>Cédula:</strong></label>
            <span>{{ datos_candidata.cedula if datos_candidata.cedula else "No disponible" }}</span>
        </div>

        <div class="form-group">
            <label><strong>Teléfono:</strong></label>
            <input type="text" name="telefono" value="{{ datos_candidata.telefono }}">
        </div>

        <div class="form-group">
            <label><strong>Estado:</strong></label>
            <input type="text" name="estado" value="Sí" readonly>
        </div>

        <div class="form-group">
            <label><strong>Monto:</strong></label>
            <input type="text" name="monto" value="{{ datos_candidata.monto }}">
        </div>

        <div class="form-group">
            <label><strong>Fecha:</strong></label>
            <input type="date" name="fecha" value="{{ datos_candidata.fecha }}">
        </div>

        <div class="form-group">
            <label><strong>Código Asignado:</strong></label>
            <span>
                {% if datos_candidata.codigo and datos_candidata.codigo.startswith("CAN-") %}
                    {{ datos_candidata.codigo }}
                {% else %}
                    Código pendiente de generación
                {% endif %}
            </span>
        </div>

        <button type="submit">📌 Guardar Inscripción</button>
    </form>
    {% endif %}

</body>
</html>