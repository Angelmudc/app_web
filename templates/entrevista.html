<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Entrevista de Candidatas</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 10px; }
        table, th, td { border: 1px solid #ccc; }
        th, td { padding: 8px; text-align: left; }
        .mensaje { margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; background: #f0f0f0; }
        form { margin-bottom: 20px; }
        label { font-weight: bold; }
        textarea { width: 100%; }
    </style>
</head>
<body>
    {% if mensaje %}
        <div class="mensaje">{{ mensaje }}</div>
    {% endif %}

    <!-- Formulario para buscar candidatas -->
    <form method="post" action="/entrevista">
        <h2>Buscar Candidatas</h2>
        <input type="text" name="busqueda" placeholder="Ingrese el nombre de la candidata">
        <input type="submit" value="Buscar">
    </form>

    {% if resultados %}
        <h2>Resultados de la Búsqueda</h2>
        <table>
            <thead>
                <tr>
                    <th>Fila</th>
                    <th>Nombre</th>
                    <th>Teléfono</th>
                    <th>Cédula</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                {% for candidato in resultados %}
                <tr>
                    <td>{{ candidato.fila_index }}</td>
                    <td>{{ candidato.nombre }}</td>
                    <td>{{ candidato.telefono }}</td>
                    <td>{{ candidato.cedula }}</td>
                    <td>
                        <a href="/entrevista?candidata={{ candidato.fila_index }}">Seleccionar</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if candidata %}
        <h2>Entrevista para: {{ candidata.nombre }}</h2>
        <p><strong>Teléfono:</strong> {{ candidata.telefono }}</p>
        <p><strong>Cédula:</strong> {{ candidata.cedula }}</p>
        <form method="post" action="/entrevista">
            <!-- Se envía la fila de la candidata y una bandera para guardar -->
            <input type="hidden" name="fila_index" value="{{ candidata.fila_index }}">
            <input type="hidden" name="guardar" value="1">

            <p>
                <label>Dirección:</label><br>
                <textarea name="direccion" rows="2" placeholder="Ingrese la dirección"></textarea>
            </p>
            <p>
                <label>Edad:</label><br>
                <input type="text" name="edad" placeholder="Ingrese la edad">
            </p>
            <p>
                <label>Teléfono (confirmar):</label><br>
                <input type="text" name="telefono" value="{{ candidata.telefono }}">
            </p>
            <p>
                <label>Experiencia en casas de familia:</label><br>
                <textarea name="experiencia" rows="2" placeholder="Describa su experiencia"></textarea>
            </p>
            <p>
                <label>Labores del hogar que domina:</label><br>
                <textarea name="labores" rows="2" placeholder="Ej: limpieza, cocina, etc."></textarea>
            </p>
            <p>
                <label>Experiencia trabajando con niños:</label><br>
                <textarea name="trabajo_niños" rows="2" placeholder="Describa su experiencia"></textarea>
            </p>
            <p>
                <label>Comodidad con mascotas:</label><br>
                <textarea name="mascotas" rows="2" placeholder="Indique si se siente cómoda"></textarea>
            </p>
            <p>
                <label>Referencias laborales:</label><br>
                <textarea name="referencias" rows="2" placeholder="Ingrese referencias laborales"></textarea>
            </p>
            <p>
                <label>Referencias familiares:</label><br>
                <textarea name="referencias_familiares" rows="2" placeholder="Ingrese referencias familiares"></textarea>
            </p>
            <p>
                <label>¿Prefiere trabajar con dormida?</label><br>
                <textarea name="dormida" rows="2" placeholder="Sí o No, y detalles"></textarea>
            </p>
            <p>
                <label>Aspiración salarial:</label><br>
                <input type="text" name="sueldo" placeholder="Ingrese la aspiración salarial">
            </p>
            <p>
                <label>Días disponibles para trabajar:</label><br>
                <textarea name="dias_trabajo" rows="2" placeholder="Ej: lunes a viernes"></textarea>
            </p>
            <p>
                <label>Horario preferido:</label><br>
                <textarea name="horario" rows="2" placeholder="Ej: mañanas, tardes, etc."></textarea>
            </p>
            <p>
                <label>Condiciones de salud:</label><br>
                <textarea name="salud" rows="2" placeholder="Indique cualquier condición"></textarea>
            </p>
            <p>
                <label>Comentarios adicionales:</label><br>
                <textarea name="comentarios" rows="2" placeholder="Otros comentarios"></textarea>
            </p>
            <p>
                <input type="submit" value="Guardar Entrevista">
            </p>
        </form>
    {% endif %}
</body>
</html>
