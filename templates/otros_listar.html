{% extends "ordenes_base.html" %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-4 text-center">Listado de Candidatas - Otros Empleos</h1>
  
  {% if mensaje %}
    <div class="alert alert-warning">{{ mensaje }}</div>
  {% endif %}
  
  <!-- Formulario de búsqueda -->
  <form method="GET" action="{{ url_for('otros_listar') }}" class="mb-3">
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Buscar por nombre, cédula o correo" value="{{ query }}">
      <button type="submit" class="btn btn-primary">Buscar</button>
    </div>
  </form>
  
  {% if candidatos and candidatos|length > 0 %}
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Marca temporal</th>
            <th>Correo</th>
            <th>Nombre completo</th>
            <th>¿Qué edad tienes?</th>
            <th>Número de teléfono</th>
            <th>Dirección completa</th>
            <th>Cédula</th>
            <th>Nivel educativo</th>
            <th>Carrera o especialidad</th>
            <th>Idioma</th>
            <th>Computadora</th>
            <th>Licencia</th>
            <th>Habilidades</th>
            <th>Experiencia</th>
            <th>Servicios</th>
            <th>Referencias laborales</th>
            <th>Referencias familiares</th>
            <th>Términos</th>
            <th>Código</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for cand in candidatos %}
            <tr>
              <td>{{ cand[headers[0]] }}</td>
              <td>{{ cand[headers[1]] }}</td>
              <td>{{ cand[headers[2]] }}</td>
              <td>{{ cand[headers[3]] }}</td>
              <td>{{ cand[headers[4]] }}</td>
              <td>{{ cand[headers[5]] }}</td>
              <td>{{ cand[headers[6]] }}</td>
              <td>{{ cand[headers[7]] }}</td>
              <td>{{ cand[headers[8]] }}</td>
              <td>{{ cand[headers[9]] }}</td>
              <td>{{ cand[headers[10]] }}</td>
              <td>{{ cand[headers[11]] }}</td>
              <td>{{ cand[headers[12]] }}</td>
              <td>{{ cand[headers[13]] }}</td>
              <td>{{ cand[headers[14]] }}</td>
              <td>{{ cand[headers[15]] }}</td>
              <td>{{ cand[headers[16]] }}</td>
              <td>{{ cand[headers[17]] }}</td>
              <td>{{ cand[headers[18]] }}</td>
              <td>{{ cand[headers[19]] }}</td>
              <td>
                {% set identifier = cand[headers[18]] if cand[headers[18]]|string|trim != "" else cand[headers[6]] %}
                <a href="{{ url_for('otros_detalle', identifier=identifier) }}" class="btn btn-sm btn-info">Ver Detalles</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>No se encontraron candidatas.</p>
  {% endif %}
</div>
{% endblock %}
