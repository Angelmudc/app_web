<!DOCTYPE html>
<html lang="es" data-theme="auto">
<head>
  <meta charset="UTF-8">
  <title>Registro de Candidata</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#0c111b">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"/>

  <style>
    /* ===== Variables LIGHT por defecto ===== */
    :root{
      --bg: #eaf6ff;
      --bg-2: #f4f9ff;
      --text: #0f172a;
      --muted:#5b667a;
      --brand:#1A5789;
      --accent:#00AECF;
      --accent-2:#22d3ee;
      --card: rgba(255,255,255,.65);
      --border: rgba(0,0,0,.07);
      --ring: rgba(0,174,207,.25);
      --shadow-1: 0 10px 30px rgba(15,23,42,.15);
      --shadow-2: 0 24px 70px rgba(15,23,42,.16);
      --radius: 22px;
      --radius-sm: 16px;
      --navbar-h: 70px;

      /* Escala de espacios */
      --sp-1: .5rem;   /* 8px */
      --sp-2: .75rem;  /* 12px */
      --sp-3: 1rem;    /* 16px */
      --sp-4: 1.25rem; /* 20px */
      --sp-5: 1.5rem;  /* 24px */
      --sp-6: 2rem;    /* 32px */
      --sp-7: 2.5rem;  /* 40px */
    }
    /* ===== Overrides DARK ===== */
    [data-theme="dark"]{
      --bg: #0b1220;
      --bg-2: #0f172a;
      --text: #e5e7eb;
      --muted:#9aa3b2;
      --brand:#7fb4ff;
      --accent:#28c9e5;
      --card: rgba(17,24,39,.55);
      --border: rgba(148,163,184,.28);
      --ring: rgba(40,201,229,.35);
      --shadow-1: 0 16px 38px rgba(0,0,0,.55);
      --shadow-2: 0 36px 90px rgba(0,0,0,.65);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Roboto', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(1200px 620px at -10% -20%, rgba(0,174,207,.16), transparent 45%),
        radial-gradient(1100px 600px at 110% -10%, rgba(26,87,137,.14), transparent 50%),
        linear-gradient(180deg, var(--bg), var(--bg-2));
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding-top: calc(var(--navbar-h) + var(--sp-6));
      position: relative;
      overflow-x: hidden;
      line-height: 1.7; /* m√°s legible */
    }

    /* Part√≠culas */
    .particles::before, .particles::after{
      content:""; position:fixed; inset:auto; pointer-events:none; z-index:-1;
      width: 60vmax; height: 60vmax; border-radius: 50%;
      filter: blur(70px); opacity: .22;
      background: radial-gradient(closest-side, var(--accent), transparent);
    }
    .particles::before{ left:-20vmax; top:-15vmax; }
    .particles::after{ right:-25vmax; top:-10vmax; background: radial-gradient(closest-side, var(--brand), transparent); }

    /* Navbar glass */
    .navbar-glass{
      position: fixed; top:0; left:0; right:0; height: var(--navbar-h); z-index: 1030;
      display:flex; align-items:center; gap:var(--sp-3);
      backdrop-filter: saturate(160%) blur(12px);
      -webkit-backdrop-filter: saturate(160%) blur(12px);
      background: linear-gradient(0deg, rgba(255,255,255,.40), rgba(255,255,255,.20));
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow-1);
      padding: 0 var(--sp-4);
    }
    [data-theme="dark"] .navbar-glass{
      background: linear-gradient(0deg, rgba(17,24,39,.50), rgba(17,24,39,.25));
    }
    .brand{
      display:flex; align-items:center; gap:var(--sp-2);
      font-weight:800; letter-spacing:.2px; color: var(--text); text-decoration:none;
    }
    .brand .logo{
      width: 42px; height:42px; border-radius:12px; display:grid; place-items:center;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff; box-shadow: 0 8px 20px rgba(0,174,207,.35); font-size: 18px;
    }

    /* Toggle 3 estados */
    .theme-group{
      margin-left:auto; display:flex; gap:var(--sp-2); align-items:center;
      background: color-mix(in srgb, var(--card) 70%, transparent);
      border:1px solid var(--border); border-radius: 999px; padding: 6px; box-shadow: var(--shadow-1);
    }
    .theme-btn{
      border:0; background: transparent; color: var(--text);
      padding: 8px 12px; border-radius: 999px; cursor:pointer; display:flex; align-items:center; gap:8px;
      font-weight:700;
    }
    .theme-btn.active{
      background: linear-gradient(135deg, var(--accent), #0fb0d0);
      color:#fff; box-shadow: 0 8px 18px rgba(0,174,207,.28);
    }
    .theme-btn:focus{ outline:none; box-shadow: 0 0 0 8px var(--ring); }

    /* Card glass */
    .card-glass{
      width: 100%; max-width: 1040px; margin: 0 auto var(--sp-7);
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-2);
      padding: var(--sp-6) var(--sp-6); /* M√ÅS padding */
    }
    .card-glass .header{
      display:flex; align-items:center; justify-content:space-between; gap:var(--sp-3); margin-bottom: var(--sp-2);
    }
    .title{
      display:flex; align-items:center; gap:var(--sp-2); margin:0;
      font-size: clamp(1.7rem, 2.2vw, 2.2rem); font-weight:900; color: var(--brand);
    }
    .subtitle{ margin: var(--sp-2) 0 var(--sp-4); color: var(--muted); font-size: 1.02rem; }
    .accent-line{ width:90px; height:4px; border-radius:999px; background: linear-gradient(90deg, var(--accent), var(--accent-2)); margin-bottom: var(--sp-3); }

    /* Secciones y campos */
    .section{
      margin-top: var(--sp-6);
      padding: var(--sp-5) var(--sp-5);
      border-radius: var(--radius-sm);
      border: 1px dashed color-mix(in srgb, var(--border) 70%, transparent);
      background: color-mix(in srgb, var(--card) 70%, transparent);
    }
    .section h2{
      font-size: 1.12rem; font-weight: 800; margin: 0 0 var(--sp-3); color: var(--text);
      display:flex; align-items:center; gap:var(--sp-2);
    }

    /* M√°s separaci√≥n entre bloques Bootstrap sin tocar tu HTML */
    :where(.mb-3){ margin-bottom: var(--sp-5)!important; }       /* 24px */
    :where(.row.g-2){ --bs-gutter-x: 1.25rem; --bs-gutter-y: 1.25rem; } /* m√°s gap en grids */

    .form-label{ font-weight: 700; margin-bottom: var(--sp-2); }
    .help{ color: var(--muted); font-size: .95rem; margin-top: .35rem; margin-bottom: var(--sp-2); display:block; }

    .form-control, .form-select{
      border-radius: 16px;
      border:1px solid color-mix(in srgb, var(--border) 85%, transparent);
      background: color-mix(in srgb, #fff 78%, transparent); color: var(--text);
      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
      padding: 16px 16px; /* m√°s alto */
      min-height: 50px;
    }
    textarea.form-control{ padding-top: 14px; padding-bottom: 14px; }

    .form-control:focus, .form-select:focus{
      border-color: color-mix(in srgb, var(--accent) 60%, transparent);
      box-shadow: 0 0 0 8px var(--ring);
      background: color-mix(in srgb, #fff 92%, transparent);
    }

    /* ====== ICONOS DENTRO DEL CAMPO (centrados) ====== */
    .input-icon{ /* contenedor general del bloque */ }
    .control-wrap{
      position: relative; display:block; /* el icono se ancla al input/textarea, no al label/help */
    }
    .control-wrap .lead{
      position:absolute; left:16px; top:50%; transform:translateY(-50%);
      width:26px; height:26px; display:flex; align-items:center; justify-content:center;
      color:#64748b; opacity:.85; font-size:1.1rem; pointer-events:none;
    }
    .control-wrap .form-control{
      padding-left: 58px !important; /* deja espacio al icono */
    }

    /* Radios/checkboxes con m√°s espacio */
    .form-check{ margin-bottom: .85rem; }
    .form-check-input{ width: 1.1rem; height: 1.1rem; margin-top: .3rem; }
    .form-check-label{ margin-left: .15rem; }

    /* Bot√≥n principal */
    .btn-pill{
      border:0; border-radius: 999px; padding: 16px 22px; font-weight: 900; letter-spacing:.2px;
      display:inline-grid; grid-auto-flow:column; place-items:center; gap:12px; color:#fff;
      background: linear-gradient(135deg, var(--accent), #0fb0d0);
      box-shadow: 0 14px 30px rgba(0,174,207,.30);
      transition: transform .12s ease, filter .2s ease, box-shadow .2s ease, background .25s ease;
      position:relative; overflow:hidden; min-height: 54px; font-size: 1.02rem;
    }
    .btn-pill:hover{ transform: translateY(-1px); filter: brightness(.98); }
    .btn-pill:focus{ box-shadow: 0 0 0 8px var(--ring); outline: none; }

    /* Alert glass */
    .alert{
      border-radius: 16px; border:1px solid var(--border);
      background: color-mix(in srgb, var(--card) 80%, transparent);
      box-shadow: var(--shadow-1);
      padding: var(--sp-3) var(--sp-4);
      margin-top: var(--sp-3);
    }

    /* Footer glass */
    footer{
      backdrop-filter: saturate(140%) blur(10px);
      -webkit-backdrop-filter: saturate(140%) blur(10px);
      background: linear-gradient(180deg, color-mix(in srgb, var(--card) 70%, transparent), transparent);
      border-top: 1px solid var(--border);
      color: var(--muted);
      margin-top: var(--sp-7); padding: var(--sp-4) 0;
    }

    @media (max-width: 576px){
      .card-glass{ padding: var(--sp-5); }
      .section{ padding: var(--sp-4); }
      .subtitle{ margin-bottom: var(--sp-5); }
    }

    @media (prefers-reduced-motion: reduce){
      *{animation:none!important; transition:none!important}
    }
  </style>
</head>
<body class="particles" id="rootBody">
  <!-- NAVBAR GLASS -->
  <header class="navbar-glass">
    <a class="brand" href="{{ url_for('registro_publico') }}" aria-label="Inicio">
      <span class="logo"><i class="fa-solid fa-sparkles"></i></span>
      <span>Dom√©stica del Cibao A&amp;D</span>
    </a>

    <!-- Toggle 3 estados -->
    <div class="theme-group" role="group" aria-label="Selector de tema">
      <button class="theme-btn" id="btnLight" type="button" data-mode="light" title="Modo claro">‚òÄÔ∏è <span class="d-none d-sm-inline">Claro</span></button>
      <button class="theme-btn" id="btnDark"  type="button" data-mode="dark"  title="Modo oscuro">üåô <span class="d-none d-sm-inline">Oscuro</span></button>
      <button class="theme-btn active" id="btnAuto"  type="button" data-mode="auto"  title="Seguir al sistema">üåÄ <span class="d-none d-sm-inline">Auto</span></button>
    </div>
  </header>

  <!-- CARD GLASS PRINCIPAL -->
  <main class="card-glass" role="main">
    <div class="header">
      <h1 class="title">üìù Registro de Candidata</h1>
    </div>
    <p class="subtitle">Completa tus datos con claridad. Los campos marcados con <strong>*</strong> son obligatorios.</p>
    <div class="accent-line" aria-hidden="true"></div>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for cat, msg in messages %}
        <div class="alert alert-{{ 'danger' if cat=='danger' else (cat=='warning' and 'warning' or 'success') }} alert-dismissible fade show" role="alert" aria-live="polite">
          {{ msg }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
        </div>
      {% endfor %}
    {% endwith %}

    <!-- FORM (ids/names intactos) -->
    <form method="post" action="{{ url_for('registro_publico') }}" id="registroForm" autocomplete="on" novalidate>
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <!-- Identidad -->
      <section class="section">
        <h2><i class="fa-solid fa-id-card-clip"></i> Identidad</h2>

        <div class="mb-3 input-icon">
          <label for="nombre_completo" class="form-label">Nombre completo *</label>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-user"></i></span>
            <input type="text" class="form-control" id="nombre_completo" name="nombre_completo" required placeholder="Ej: Mar√≠a P√©rez">
          </span>
        </div>

        <div class="mb-3 input-icon">
          <label for="edad" class="form-label">¬øQu√© edad tienes? *</label>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-hashtag"></i></span>
            <input type="number" inputmode="numeric" class="form-control" id="edad" name="edad" required placeholder="Ej: 28">
          </span>
        </div>

        <div class="mb-3 input-icon">
          <label for="numero_telefono" class="form-label">N√∫mero de tel√©fono *</label>
          <span class="help">Ojo: si no es tu n√∫mero personal, ind√≠calo.</span>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-phone"></i></span>
            <input type="tel" inputmode="tel" class="form-control" id="numero_telefono" name="numero_telefono" required placeholder="Ej: 809-000-0000">
          </span>
        </div>

        <div class="mb-3 input-icon">
          <label for="direccion_completa" class="form-label">Direcci√≥n completa *</label>
          <span class="help">Incluye ciudad, sector, calle y n√∫mero.</span>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-location-dot"></i></span>
            <textarea class="form-control" id="direccion_completa" name="direccion_completa" rows="2" required placeholder="Ej: Santiago, Los Jardines, Calle 10 #12"></textarea>
          </span>
        </div>

        <div class="mb-3 input-icon">
          <label for="cedula" class="form-label">C√©dula *</label>
          <span class="help">Ingresa tu c√©dula para registrarla (se formatea autom√°ticamente).</span>
          <span class="control-wrap">
            <span class="lead"><i class="fa-regular fa-address-card"></i></span>
            <input type="text" class="form-control" id="cedula" name="cedula" required placeholder="000-0000000-0">
          </span>
        </div>
      </section>

      <!-- Preferencias de trabajo -->
      <section class="section">
        <h2><i class="fa-solid fa-briefcase"></i> Preferencias de trabajo</h2>

        <div class="mb-3">
          <label class="form-label">Modalidad de trabajo preferida *</label>
          <div class="form-check"><input class="form-check-input" type="radio" name="modalidad_trabajo_preferida" id="modalidad_salida" value="Salida diaria" required><label class="form-check-label" for="modalidad_salida">Salida diaria</label></div>
          <div class="form-check"><input class="form-check-input" type="radio" name="modalidad_trabajo_preferida" id="modalidad_dormida" value="Dormida"><label class="form-check-label" for="modalidad_dormida">Dormida</label></div>
        </div>

        <div class="mb-3 input-icon">
          <label for="rutas_cercanas" class="form-label">Rutas cercanas *</label>
          <span class="help">Escribe las rutas de transporte que pasan por tu zona.</span>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-route"></i></span>
            <input type="text" class="form-control" id="rutas_cercanas" name="rutas_cercanas" required placeholder="Ej: Ruta A, Av. Principal">
          </span>
        </div>

        <div class="mb-3 input-icon">
          <label for="empleo_anterior" class="form-label">¬øQu√© hac√≠as en tu empleo anterior? *</label>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-list-check"></i></span>
            <textarea class="form-control" id="empleo_anterior" name="empleo_anterior" rows="2" required placeholder="Ej: Limpieza profunda y cocina b√°sica"></textarea>
          </span>
        </div>

        <div class="mb-3">
          <label class="form-label">¬øCu√°ntos a√±os de experiencia laboral tienes? *</label>
          <div class="form-check"><input class="form-check-input" type="radio" name="anos_experiencia" id="exp_1" value="1 a√±o" required><label class="form-check-label" for="exp_1">1 a√±o</label></div>
          <div class="form-check"><input class="form-check-input" type="radio" name="anos_experiencia" id="exp_2" value="2 a√±os"><label class="form-check-label" for="exp_2">2 a√±os</label></div>
          <div class="form-check"><input class="form-check-input" type="radio" name="anos_experiencia" id="exp_3" value="3 a√±os o m√°s"><label class="form-check-label" for="exp_3">3 a√±os o m√°s</label></div>
          <div class="form-check"><input class="form-check-input" type="radio" name="anos_experiencia" id="exp_4" value="Sin experiencia"><label class="form-check-label" for="exp_4">Sin experiencia</label></div>
        </div>

        <div class="mb-3">
          <label class="form-label">√Åreas de experiencia * <span class="help">(marca todas las que correspondan)</span></label>
          <div class="row g-2">
            <div class="col-sm-6 col-lg-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="areas_experiencia" id="area_1" value="Limpieza"><label class="form-check-label" for="area_1">Limpieza</label></div></div>
            <div class="col-sm-6 col-lg-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="areas_experiencia" id="area_2" value="Cocina"><label class="form-check-label" for="area_2">Cocina</label></div></div>
            <div class="col-sm-6 col-lg-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="areas_experiencia" id="area_3" value="Ni√±era"><label class="form-check-label" for="area_3">Ni√±era</label></div></div>
            <div class="col-sm-6 col-lg-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="areas_experiencia" id="area_4" value="Cuidado de ancianos"><label class="form-check-label" for="area_4">Cuidado de ancianos</label></div></div>
            <div class="col-sm-6 col-lg-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="areas_experiencia" id="area_5" value="Todas las anteriores"><label class="form-check-label" for="area_5">Todas las anteriores</label></div></div>
            <div class="col-sm-6 col-lg-4"><div class="form-check"><input class="form-check-input" type="checkbox" name="areas_experiencia" id="area_6" value="Enfermer√≠a"><label class="form-check-label" for="area_6">Enfermer√≠a</label></div></div>
          </div>
        </div>

        <div class="mb-1">
          <label class="form-label">¬øSabes planchar? *</label>
          <div>
            <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="sabe_planchar" id="planch_si" value="si" required><label class="form-check-label" for="planch_si">S√≠</label></div>
            <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="sabe_planchar" id="planch_no" value="no"><label class="form-check-label" for="planch_no">No</label></div>
          </div>
        </div>
      </section>

      <!-- Referencias -->
      <section class="section">
        <h2><i class="fa-solid fa-people-group"></i> Referencias</h2>

        <div class="mb-3 input-icon">
          <label for="contactos_referencias_laborales" class="form-label">Dos contactos de referencias laborales *</label>
          <span class="help">Pon nombre completo, tel√©fono y relaci√≥n laboral, separa cada referencia en un p√°rrafo.</span>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-briefcase"></i></span>
            <textarea class="form-control" id="contactos_referencias_laborales" name="contactos_referencias_laborales" rows="3" required placeholder="Ej: Juan D√≠az - 8090000000 - Jefe en XYZ&#10;Ana Rojas - 8091112222 - Coordinadora en ABC"></textarea>
          </span>
        </div>

        <div class="mb-3 input-icon">
          <label for="referencias_familiares_detalle" class="form-label">Dos referencias familiares *</label>
          <span class="help">Pon nombre completo, tel√©fono y parentesco (no vecinos ni amigos).</span>
          <span class="control-wrap">
            <span class="lead"><i class="fa-solid fa-house-chimney-user"></i></span>
            <textarea class="form-control" id="referencias_familiares_detalle" name="referencias_familiares_detalle" rows="3" required placeholder="Ej: Pedro P√©rez - 8093334444 - Hermano&#10;Mar√≠a G√≥mez - 8095556666 - Madre"></textarea>
          </span>
        </div>

        <div class="mb-0">
          <label class="form-label">¬øAceptas que cobremos un % de tu sueldo como honorarios? *</label>
          <span class="help">Es un √∫nico pago que te explicamos al final.</span>
          <div class="form-check"><input class="form-check-input" type="radio" name="acepta_porcentaje_sueldo" id="acepta_si" value="1" required><label class="form-check-label" for="acepta_si">S√≠</label></div>
          <div class="form-check"><input class="form-check-input" type="radio" name="acepta_porcentaje_sueldo" id="acepta_no" value="0"><label class="form-check-label" for="acepta_no">No</label></div>
        </div>
      </section>

      <!-- Submit -->
      <div class="text-center" style="margin-top: var(--sp-6);">
        <button type="submit" class="btn-pill" id="submitBtn">
          <span class="spinner d-none" id="spinner"></span>
          <span id="btnText">Enviar</span> <i class="fa-solid fa-paper-plane"></i>
        </button>
      </div>
    </form>
  </main>

  <footer class="text-center">
    <div class="container">
      <small>&copy; 2025 Dom√©stica del Cibao A&amp;D. Todos los derechos reservados.</small>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

  <script>
    (function(){
      const docEl = document.documentElement;
      const metaTheme = document.querySelector('meta[name="theme-color"]');

      // Botones tema
      const btnLight = document.getElementById('btnLight');
      const btnDark  = document.getElementById('btnDark');
      const btnAuto  = document.getElementById('btnAuto');
      const group = [btnLight, btnDark, btnAuto];

      const setActive = (mode)=> group.forEach(b=>b.classList.toggle('active', b.dataset.mode === mode));
      const applyThemeMeta = ()=> metaTheme?.setAttribute('content', docEl.getAttribute('data-theme') === 'dark' ? '#0b1220' : '#eaf6ff');

      // Modo inicial
      const saved = localStorage.getItem('theme') || 'auto';
      docEl.setAttribute('data-theme', saved === 'auto'
        ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
        : saved);
      setActive(saved); applyThemeMeta();

      // Cambios del SO en Auto
      const mql = window.matchMedia('(prefers-color-scheme: dark)');
      mql.addEventListener('change', (ev)=>{
        const mem = localStorage.getItem('theme') || 'auto';
        if(mem === 'auto'){
          docEl.setAttribute('data-theme', ev.matches ? 'dark' : 'light');
          applyThemeMeta();
        }
      });

      // Clicks
      group.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const mode = btn.dataset.mode;
          localStorage.setItem('theme', mode);
          if(mode === 'auto'){
            const sysDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            docEl.setAttribute('data-theme', sysDark ? 'dark' : 'light');
          }else{
            docEl.setAttribute('data-theme', mode);
          }
          setActive(mode); applyThemeMeta();
        });
      });

      // Bot√≥n enviar (ripple + lock)
      const submitBtn = document.getElementById('submitBtn');
      const spin = document.getElementById('spinner');
      const btxt = document.getElementById('btnText');
      const form = document.getElementById('registroForm');

      submitBtn.addEventListener('click', (e)=>{
        const r = submitBtn.getBoundingClientRect();
        submitBtn.style.setProperty('--x', (e.clientX - r.left) + 'px');
        submitBtn.style.setProperty('--y', (e.clientY - r.top) + 'px');
        submitBtn.classList.remove('ripple'); void submitBtn.offsetWidth; submitBtn.classList.add('ripple');
      });

      // Campos (ids intactos)
      const nombre = document.getElementById('nombre_completo');
      const edad   = document.getElementById('edad');
      const tel    = document.getElementById('numero_telefono');
      const ced    = document.getElementById('cedula');
      window.addEventListener('DOMContentLoaded', ()=> nombre?.focus());

      const softTrim = el => { if (el && typeof el.value === 'string') el.value = el.value.trim(); };

      tel?.addEventListener('blur', ()=>{
        if(!tel.value) return;
        let v = tel.value.replace(/[^\d+]/g,'').replace(/(?!^)\+/g,'');
        tel.value = v;
      });

      ced?.addEventListener('blur', ()=>{
        if(!ced.value) return;
        const digits = ced.value.replace(/\D/g,'').slice(0,11);
        if(digits.length === 11){
          ced.value = `${digits.slice(0,3)}-${digits.slice(3,10)}-${digits.slice(10)}`;
        }
      });

      edad?.addEventListener('input', ()=>{
        if(edad.value) edad.value = String(Math.max(0, parseInt(edad.value, 10) || 0));
      });

      form.addEventListener('submit', ()=>{
        softTrim(nombre); softTrim(tel); softTrim(ced);
        submitBtn.disabled = true;
        spin.classList.remove('d-none');
        btxt.textContent = 'Enviando‚Ä¶';
      });
    })();
  </script>
</body>
</html>
