{% extends 'base.html' %}

{% block title %}DomÃ©stica del Cibao A&D â€“ Inicio{% endblock %}

{% block hero %}
<section class="hero-section text-center py-5"
         style="background: linear-gradient(160deg, #e7ecfb 0%, #f4f7fc 50%, #ffffff 100%);
                border-bottom: 3px solid #dbe3f2;
                box-shadow: 0 4px 12px rgba(0,0,0,0.05);">

  <div class="container d-flex flex-column align-items-center justify-content-center position-relative">

    {# Logo #}
    <img src="{{ url_for('static', filename='logo_nuevo.png') }}"
         alt="DomÃ©stica del Cibao A&D"
         class="img-fluid mb-4 animate-fade"
         style="max-width: 640px; width: 90%;
                filter: drop-shadow(0 8px 16px rgba(0,0,0,0.15));">

    <h1 class="fw-bold text-dark mb-2 animate-slide" style="font-size: 2rem;">
      DomÃ©stica del Cibao A&D
    </h1>

    <p class="lead text-muted mb-4 animate-fade" style="font-size: 1.1rem;">
      GestiÃ³n profesional, moderna y confiable de empleadas domÃ©sticas.
    </p>

    {% set admin_login_url = url_for_safe('admin.login') %}
    {% set fallback_login_url = url_for_safe('login') %}

    {% if admin_login_url %}
      <a href="{{ admin_login_url }}"
         class="btn btn-primary btn-lg fw-semibold px-5 py-2 shadow-sm animate-fade">
        <i class="fa-solid fa-key me-2"></i> Ingresar Administrador
      </a>
    {% elif fallback_login_url %}
      <a href="{{ fallback_login_url }}"
         class="btn btn-primary btn-lg fw-semibold px-5 py-2 shadow-sm animate-fade">
        <i class="fa-solid fa-key me-2"></i> Ingresar
      </a>
    {% endif %}
  </div>
</section>
{% endblock %}

{% block content %}
<div class="container py-5">

  <h1 class="text-center mb-5 fw-bold text-dark animate-slide" style="font-size: 1.8rem;">
    <i class="fa-solid fa-clipboard-list me-2 text-primary"></i> Panel Principal
  </h1>

  {% set sections = [

    ('GestiÃ³n de Candidatas', 'fa-users', [
      ('buscar_candidata', 'ğŸ” Buscar / Editar', 'Busca cualquier candidata por nombre o cÃ©dula y edita sus datos.'),
      ('inscripcion', 'ğŸ“ InscripciÃ³n', 'Registra inscripciÃ³n, asigna cÃ³digo, monto y fecha.'),
      ('porciento', 'ğŸ’² Porciento', 'Calcula porcentajes pendientes y estado.'),
      ('candidatas_porcentaje', 'ğŸ“‹ Candidatas con porcentaje', 'Lista candidatas con porcentaje activo.'),
      ('pagos', 'ğŸ’³ Pagos', 'Gestiona pagos, abonos y calificaciones.'),
      ('filtrar', 'ğŸ” Filtrar Candidatas', 'Filtra por ciudad, rutas, modalidad y experiencia.'),
      ('dashboard_procesos', 'ğŸ“Š Dashboard Procesos', 'Totales y mÃ©tricas por estado.'),
      ('finalizar_proceso', 'âœ… Finalizar Proceso', 'Sube fotos y finaliza procesos.'),
      ('eliminar_candidata', 'ğŸ—‘ï¸ Eliminar Candidata', 'Elimina candidatas duplicadas revisando documentos e historial.')
    ]),

    ('Solicitudes', 'fa-file-lines', [
      ('secretarias_copiar_solicitudes', 'ğŸ“¢ Publicar Hoy', 'Solicitudes activas del dÃ­a.'),
      ('secretarias_buscar_solicitudes', 'ğŸ” Buscar Solicitudes', 'BÃºsqueda avanzada de solicitudes.')
    ]),

    ('Reportes', 'fa-chart-line', [
      ('reporte_inscripciones', 'ğŸ“ˆ Reporte Inscripciones', 'Reporte mensual de inscripciones.'),
      ('reporte_pagos', 'ğŸ“„ Reporte Pagos', 'Pagos pendientes en PDF.')
    ]),

    ('Sitio PÃºblico', 'fa-globe', [
      ('registro_publico', 'ğŸ—³ï¸ Registro PÃºblico', 'Formulario pÃºblico de registro.')
    ]),

    ('Documentos', 'fa-folder-open', [
      ('subir_fotos.subir_fotos', 'ğŸ“¤ Subir Fotos', 'Sube imÃ¡genes a la base de datos.'),
      ('gestionar_archivos', 'ğŸ“¥ Gestionar Archivos', 'Descarga documentos y archivos.'),
      ('referencias', 'ğŸ—‚ï¸ Referencias', 'Edita referencias laborales y familiares.')
    ])

  ] %}

  {% for section in sections %}
    <div class="mb-5">
      <h2 class="section-title">
        <i class="fa-solid {{ section[1] }} me-2 text-primary"></i> {{ section[0] }}
      </h2>

      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for item in section[2] %}
          {% set url = url_for_safe(item[0]) %}
          {% if url %}
            <div class="col">
              <div class="dashboard-card">
                <h5>{{ item[1] }}</h5>
                <p>{{ item[2] }}</p>
                <a href="{{ url }}" class="btn btn-outline-primary w-100">
                  Ir a {{ item[1].split(' ', 1)[-1] }}
                </a>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  {% endfor %}

  {# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ENTREVISTAS ESTRUCTURADAS (NUEVO) â€“ ACCESO DIRECTO
     (No quita la entrevista vieja; esto es un acceso aparte)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ #}
  <div class="mb-5">
    <h2 class="section-title">
      <i class="fa-solid fa-clipboard-question me-2 text-primary"></i> Entrevistas estructuradas (Nuevo)
    </h2>
    <p style="margin-top:-6px; color:#667085;">
      Acceso directo para que las secretarias creen y editen entrevistas por preguntas.
    </p>

    {# Usamos url_for_safe si existe el endpoint; si no, caemos a rutas directas #}
    {% set entrevista_inicio_url = (url_for_safe('entrevistas_inicio') or '/entrevistas') %}
    {% set entrevista_buscar_url = (url_for_safe('entrevistas_buscar') or '/entrevistas/buscar') %}
    {% set entrevista_lista_url  = (url_for_safe('entrevistas_lista')  or '/entrevistas/lista') %}

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      <div class="col">
        <div class="dashboard-card" style="border:1px solid rgba(74,105,189,.18);">
          <h5>ğŸ§© Entrar a Entrevistas (Nuevo)</h5>
          <p>Abre el mÃ³dulo nuevo de entrevistas estructuradas.</p>
          <a href="{{ entrevista_inicio_url }}" class="btn btn-primary w-100">
            Entrar
          </a>
        </div>
      </div>

      <div class="col">
        <div class="dashboard-card" style="border:1px solid rgba(74,105,189,.18);">
          <h5>ğŸ” Buscar candidata y entrevistar</h5>
          <p>Busca por nombre/cÃ©dula y crea o edita la entrevista nueva.</p>
          <a href="{{ entrevista_buscar_url }}" class="btn btn-outline-primary w-100">
            Buscar
          </a>
        </div>
      </div>

      <div class="col">
        <div class="dashboard-card" style="border:1px solid rgba(74,105,189,.18);">
          <h5>ğŸ“‹ Listado de entrevistas</h5>
          <p>Ve las entrevistas creadas recientemente y edÃ­talas.</p>
          <a href="{{ entrevista_lista_url }}" class="btn btn-outline-primary w-100">
            Ver listado
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  body { background-color:#f2f5fa; transition:.4s; }

  .section-title {
    font-weight:600; color:#2f3640;
    border-left:5px solid #4a69bd;
    padding-left:14px; margin-bottom:1.6rem;
  }

  .dashboard-card {
    background:#fff; border-radius:16px;
    padding:2rem 1.7rem;
    box-shadow:0 4px 18px rgba(0,0,0,.07);
    transition:.35s;
  }

  .dashboard-card:hover {
    transform:translateY(-6px);
    box-shadow:0 8px 22px rgba(74,105,189,.2);
  }

  .animate-fade { animation: fadeIn 1.4s ease forwards; }
  .animate-slide { animation: slideUp 1.2s ease forwards; }

  @keyframes fadeIn {
    from {opacity:0; transform:scale(.95)}
    to {opacity:1; transform:scale(1)}
  }

  @keyframes slideUp {
    from {opacity:0; transform:translateY(25px)}
    to {opacity:1; transform:translateY(0)}
  }
</style>
{% endblock %}
