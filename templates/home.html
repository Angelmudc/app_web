{% extends 'base.html' %}

{% block title %}DomÃ©stica del Cibao A&D â€“ Inicio{% endblock %}

{% block hero %}
<section class="hero-section text-center py-5"
         style="background: linear-gradient(160deg, #e7ecfb 0%, #f4f7fc 50%, #ffffff 100%);
                border-bottom: 3px solid #dbe3f2;
                box-shadow: 0 4px 12px rgba(0,0,0,0.05);">

  <div class="container d-flex flex-column align-items-center justify-content-center position-relative">

    <!-- BotÃ³n modo noche -->
    <button id="themeToggle"
            class="btn btn-sm position-absolute top-0 end-0 mt-2 me-3 shadow-sm"
            style="border:none; background:#fff; color:#333;
                   border-radius:50%; width:40px; height:40px;">
      <i class="fa-solid fa-moon"></i>
    </button>

    <!-- Logo -->
    <img src="{{ url_for('static', filename='logo_nuevo.png') }}"
         alt="DomÃ©stica del Cibao A&D"
         class="img-fluid mb-4 animate-fade"
         style="max-width: 640px; width: 90%;
                filter: drop-shadow(0 8px 16px rgba(0,0,0,0.15));">

    <h1 class="fw-bold text-dark mb-2 animate-slide" style="font-size: 2rem;">
      DomÃ©stica del Cibao A&D
    </h1>

    <p class="lead text-muted mb-4 animate-fade" style="font-size: 1.1rem;">
      GestiÃ³n profesional, moderna y confiable de empleadas domÃ©sticas.
    </p>

    {% set admin_login_url = url_for_safe('admin.login') %}
    {% set fallback_login_url = url_for_safe('login') %}

    {% if admin_login_url %}
      <a href="{{ admin_login_url }}"
         class="btn btn-primary btn-lg fw-semibold px-5 py-2 shadow-sm animate-fade">
        <i class="fa-solid fa-key me-2"></i> Ingresar Administrador
      </a>
    {% elif fallback_login_url %}
      <a href="{{ fallback_login_url }}"
         class="btn btn-primary btn-lg fw-semibold px-5 py-2 shadow-sm animate-fade">
        <i class="fa-solid fa-key me-2"></i> Ingresar
      </a>
    {% endif %}
  </div>
</section>
{% endblock %}

{% block content %}
<div class="container py-5">

  <h1 class="text-center mb-5 fw-bold text-dark animate-slide" style="font-size: 1.8rem;">
    <i class="fa-solid fa-clipboard-list me-2 text-primary"></i> Panel Principal
  </h1>

  {% set sections = [

    ('GestiÃ³n de Candidatas', 'fa-users', [
      ('buscar_candidata', 'ğŸ” Buscar / Editar', 'Busca cualquier candidata por nombre o cÃ©dula y edita sus datos.'),
      ('inscripcion', 'ğŸ“ InscripciÃ³n', 'Registra inscripciÃ³n, asigna cÃ³digo, monto y fecha.'),
      ('porciento', 'ğŸ’² Porciento', 'Calcula porcentajes pendientes y estado.'),
      ('candidatas_porcentaje', 'ğŸ“‹ Candidatas con porcentaje', 'Lista candidatas con porcentaje activo.'),
      ('pagos', 'ğŸ’³ Pagos', 'Gestiona pagos, abonos y calificaciones.'),
      ('filtrar', 'ğŸ” Filtrar Candidatas', 'Filtra por ciudad, rutas, modalidad y experiencia.'),
      ('dashboard_procesos', 'ğŸ“Š Dashboard Procesos', 'Totales y mÃ©tricas por estado.'),
      ('finalizar_proceso', 'âœ… Finalizar Proceso', 'Sube fotos y finaliza procesos.'),
      ('eliminar_candidata', 'ğŸ—‘ï¸ Eliminar Candidata', 'Elimina candidatas duplicadas revisando documentos e historial.')
    ]),

    ('Solicitudes', 'fa-file-lines', [
      ('secretarias_copiar_solicitudes', 'ğŸ“¢ Publicar Hoy', 'Solicitudes activas del dÃ­a.'),
      ('secretarias_buscar_solicitudes', 'ğŸ” Buscar Solicitudes', 'BÃºsqueda avanzada de solicitudes.')
    ]),

    ('Reportes', 'fa-chart-line', [
      ('reporte_inscripciones', 'ğŸ“ˆ Reporte Inscripciones', 'Reporte mensual de inscripciones.'),
      ('reporte_pagos', 'ğŸ“„ Reporte Pagos', 'Pagos pendientes en PDF.')
    ]),

    ('Sitio PÃºblico', 'fa-globe', [
      ('registro_publico', 'ğŸ—³ï¸ Registro PÃºblico', 'Formulario pÃºblico de registro.')
    ]),

    ('Documentos', 'fa-folder-open', [
      ('subir_fotos.subir_fotos', 'ğŸ“¤ Subir Fotos', 'Sube imÃ¡genes a la base de datos.'),
      ('gestionar_archivos', 'ğŸ“¥ Gestionar Archivos', 'Descarga documentos y entrevistas.'),
      ('referencias', 'ğŸ—‚ï¸ Referencias', 'Edita referencias laborales y familiares.'),
      ('entrevista', 'ğŸ“ Entrevista', 'Realiza y guarda entrevistas.')
    ])

  ] %}

  {% for section in sections %}
    <div class="mb-5">
      <h2 class="section-title">
        <i class="fa-solid {{ section[1] }} me-2 text-primary"></i> {{ section[0] }}
      </h2>

      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for item in section[2] %}
          {% set url = url_for_safe(item[0]) %}
          {% if url %}
            <div class="col">
              <div class="dashboard-card">
                <h5>{{ item[1] }}</h5>
                <p>{{ item[2] }}</p>
                <a href="{{ url }}" class="btn btn-outline-primary w-100">
                  Ir a {{ item[1].split(' ', 1)[-1] }}
                </a>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  {% endfor %}
</div>

<style>
  body { background-color:#f2f5fa; transition:.4s; }
  .dark-mode { background:#1f242b!important; color:#e5e5e5!important; }

  .section-title {
    font-weight:600; color:#2f3640;
    border-left:5px solid #4a69bd;
    padding-left:14px; margin-bottom:1.6rem;
  }

  .dashboard-card {
    background:#fff; border-radius:16px;
    padding:2rem 1.7rem;
    box-shadow:0 4px 18px rgba(0,0,0,.07);
    transition:.35s;
  }

  .dashboard-card:hover {
    transform:translateY(-6px);
    box-shadow:0 8px 22px rgba(74,105,189,.2);
  }

  .dark-mode .dashboard-card {
    background:#2a2f38; color:#dcdcdc;
  }

  .animate-fade { animation: fadeIn 1.4s ease forwards; }
  .animate-slide { animation: slideUp 1.2s ease forwards; }

  @keyframes fadeIn {
    from {opacity:0; transform:scale(.95)}
    to {opacity:1; transform:scale(1)}
  }

  @keyframes slideUp {
    from {opacity:0; transform:translateY(25px)}
    to {opacity:1; transform:translateY(0)}
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById("themeToggle");
    const icon = toggle.querySelector("i");
    const body = document.body;

    if (localStorage.getItem("theme") === "dark") {
      body.classList.add("dark-mode");
      icon.classList.replace("fa-moon","fa-sun");
    }

    toggle.addEventListener("click", () => {
      body.classList.toggle("dark-mode");
      const dark = body.classList.contains("dark-mode");
      icon.classList.replace(dark ? "fa-moon":"fa-sun", dark ? "fa-sun":"fa-moon");
      localStorage.setItem("theme", dark ? "dark":"light");
    });
  });
</script>
{% endblock %}

